name: Deploy Mini PC Empresa (systemd)
on: [push]
jobs:
  deploy:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        pc:
          - { name: "MiniPC-Empresa", host: "100.78.69.8", user: "zywa", path: "/usr/local/etc/goomer-apolo-sync" }
    steps:
    - uses: actions/checkout@v4
    - name: Deploy ${{ matrix.pc.name }}
      uses: appleboy/ssh-action@v1.0.0
      with:
        host: ${{ matrix.pc.host }}
        username: ${{ matrix.pc.user }}
        key: ${{ secrets.SSH_KEY }}
        debug: true
        script: |
          cd ${{ matrix.pc.path }}
          git pull origin main
          pip install -r requirements.txt --quiet
          sudo systemctl restart goomer 
